{% extends 'base.html' %}
{% load humanize %}
{% block body_class %}product-search{% endblock %}

{% block content %}
    <style>.pagination-container {
    display: flex;
    justify-content: center;
    margin: 40px 0;
}

.pagination {
    display: flex;
    list-style: none;
    gap: 10px;
}

.page-item .page-link {
    padding: 8px 16px;
    border: 1px solid #ddd;
    color: #333;
    text-decoration: none;
    border-radius: 4px;
}

.page-item.active .page-link {
    background-color: #000000; /* Màu chủ đạo của bạn */
    color: white;
    border-color: #000000;
}

.page-item .page-link:hover:not(.active) {
    background-color: #f5f5f5;
}</style>
<div class="container product-wrapper">
    <section class="top">
        <div class="filter-wrapper">
            <div class="search-info">
                <h2>Kết quả tìm kiếm</h2>
                <p>Tìm thấy <strong>12</strong> sản phẩm</p>
            </div>

            <div class="filter-controls">
                <div class="select-group">
                    <label for="sort-select">Sắp xếp theo:</label>
                    <select id="sort-select">
                        <option value="newest">Mới nhất</option>
                        <option value="oldest">Cũ nhất</option>
                        <option value="price-asc">Giá: Thấp đến Cao</option>
                        <option value="price-desc">Giá: Cao đến Thấp</option>
                    </select>
                </div>
                <button type="button" class="btn-filter" onclick="applyFilter()">
                    <i class="fas fa-filter"></i> Lọc ngay
                </button>
            </div>
        </div>
    </section>
    <section class="products container">
        <div class="product-new">
{#            <h2 class="section-title">Kết quả tìm kiếm</h2>#}

            <div class="product-grid">
                {% for p in result %}
                <div class="card reveal">
                    {% for img in p.images.all %}
                        {% if img.is_feature %}
                            <div class="card-img">
                                <img src="{{ img.image.url }}" alt="">
                            </div>
                        {% endif %}
                    {% endfor %}
                    <div class="card-info">
                        <h3>{{ p.name }}</h3>
                        <p>{{ p.base_price|floatformat:0|intcomma }} ₫</p>
                        <a href="{% url 'product_detail' p.id %}" class="add-cart">Xem chi tiết</a>
                    </div>
                </div>
                {% endfor %}
            </div>

        </div>
    </section>
</div>

<div class="pagination-container">
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if result.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?c={{ query }}&page={{ result.previous_page_number }}">Trước</a>
                </li>
            {% endif %}

            <li class="page-item active">
                <span class="page-link">Trang {{ result.number }} / {{ result.paginator.num_pages }}</span>
            </li>

            {% if result.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?c={{ query }}&page={{ result.next_page_number }}">Sau</a>
                </li>
            {% endif %}
        </ul>
    </nav>
</div>

<script>
    function applyFilter() {
        const sortValue = document.getElementById('sort-select').value;
        // Ví dụ: chuyển hướng trang với tham số lọc
        {#window.location.href = `/search?q=phone&sort=${sortValue}`;#}
        window.location.href = `/search`;
    }
</script>
{% endblock %}